#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>

void increase_file_limit();
void set_nonblock(int fd);
int *create_pipes(size_t *pipe_count);
void close_pipes(int *pipefds, size_t pipe_count);
void pipe_close(int pipefds[2]);
size_t pipe_spray(const int *pipefds, size_t pipe_count,
                  void *pipe_buffer, size_t pipe_buffer_size,
                  void (^update)(uint32_t pipe_index, void *data, size_t size));