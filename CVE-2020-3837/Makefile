GO_EASY_ON_ME = 1
DEBUG = 0
FINALPACKAGE = 1

# THEOS_DEVICE_IP = 172.16.3.21
THEOS_DEVICE_IP = 192.168.0.33 -p 2222
# THEOS_DEVICE_IP = 172.20.10.4 -p2222

TARGET := iphone:clang:12.4:12.4
ARCHS = arm64

include $(THEOS)/makefiles/common.mk

TOOL_NAME = CVE-2020-3837

CVE-2020-3837_FILES = exploit.c ioaccel.c iosurface.c exploit_utilities.c kernel_memory.c # EXPLOIT CODE
CVE-2020-3837_FILES += helper/find_port.c helper/find_shmem.c helper/kexecute.c helper/krw.m helper/kutils.c helper/offsets.m helper/find_IOSurface.c helper/translations.c # HELPER CODE
# CVE-2020-3837_FILES = poc.m #POC
CVE-2020-3837_CFLAGS = -fobjc-arc
CVE-2020-3837_CODESIGN_FLAGS = -Sentitlements.plist
CVE-2020-3837_FRAMEWORKS = IOKit
CVE-2020-3837_INSTALL_PATH = /usr/local/bin

include $(THEOS_MAKE_PATH)/tool.mk
