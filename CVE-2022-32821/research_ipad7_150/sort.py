input_filename = 'result2.txt'   # 읽어올 파일 명
output_filename = 'result_sort.txt' # 저장할 파일 명

try:
    # 1. 파일 열기 (읽기 모드)
    with open(input_filename, 'r', encoding='utf-8') as f:
        lines = f.readlines()

    # 2. 리스트 정리 (양쪽 공백 제거 및 빈 줄 제외)
    clean_lines = [line.strip() for line in lines if line.strip()]

    # 3. 정렬 수행 (핵심 로직)
    # '=' 기호를 기준으로 쪼개서 뒤쪽(인덱스 1)의 16진수 문자열을 숫자로 변환해 정렬
    sorted_lines = sorted(clean_lines, key=lambda x: int(x.split('=')[1].strip(), 16))

    # 4. 화면 출력
    print(f"--- '{input_filename}' 정렬 결과 ---")
    for line in sorted_lines:
        print(line)

    # 5. 파일로 저장 (쓰기 모드)
    with open(output_filename, 'w', encoding='utf-8') as f:
        for line in sorted_lines:
            f.write(line + '\n')
            
    print(f"\n[완료] 정렬된 내용이 '{output_filename}' 파일로 저장되었습니다.")

except FileNotFoundError:
    print(f"오류: '{input_filename}' 파일을 찾을 수 없습니다.")
except IndexError:
    print("오류: 형식이 맞지 않는 줄이 있습니다. (모든 줄에 '='가 포함되어야 합니다)")
except ValueError:
    print("오류: 주소 값을 읽을 수 없습니다. (올바른 16진수 형식인지 확인하세요)")